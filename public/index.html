<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultraviolet Proxy - 高機能Webプロキシ</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Ultravioletベースの高機能Webプロキシ。広告ブロック、セキュリティ機能、ユーザーエージェント変更機能を搭載。">
    <meta name="keywords" content="proxy, web proxy, ultraviolet, privacy, security, adblock">
    <meta name="author" content="Ultraviolet Proxy">
    
    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">
    <link rel="apple-touch-icon" href="/assets/images/icons/apple-touch-icon.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/themes.css">
    <link rel="stylesheet" href="/assets/css/responsive.css">
    
    <!-- Preload important resources -->
    <link rel="preload" href="/uv/uv.bundle.js" as="script">
    <link rel="preload" href="/uv/uv.config.js" as="script">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#2196F3">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-spinner"></div>
        <div class="loading-text">Ultraviolet Proxy を読み込み中...</div>
    </div>

    <!-- Main Container -->
    <div id="app" class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <img src="/assets/images/logo.png" alt="Ultraviolet Proxy" class="logo-img">
                    <h1 class="logo-text">Ultraviolet Proxy</h1>
                </div>
                
                <nav class="nav">
                    <button class="nav-btn" id="settingsBtn" title="設定">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11.03L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11.03C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
                        </svg>
                    </button>
                    
                    <button class="nav-btn" id="historyBtn" title="履歴">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M13.5,8H12V13L16.28,15.54L17,14.33L13.5,12.25V8M13,3A9,9 0 0,0 4,12H1L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3"/>
                        </svg>
                    </button>
                    
                    <button class="nav-btn" id="bookmarksBtn" title="お気に入り">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M17,3H7A2,2 0 0,0 5,5V21L12,18L19,21V5C19,3.89 18.1,3 17,3Z"/>
                        </svg>
                    </button>
                    
                    <button class="nav-btn" id="themeBtn" title="テーマ切り替え">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.4 6.35,17.41C9.37,20.43 14,20.54 17.33,17.97Z"/>
                        </svg>
                    </button>
                </nav>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- URL Input Section -->
            <section class="url-input-section">
                <div class="url-container">
                    <form id="proxyForm" class="proxy-form">
                        <div class="input-group">
                            <input 
                                type="url" 
                                id="urlInput" 
                                class="url-input" 
                                placeholder="URLを入力してください (例: https://example.com)"
                                autocomplete="url"
                                spellcheck="false"
                                required
                            >
                            <button type="submit" class="go-btn" id="goBtn">
                                <span class="btn-text">GO</span>
                                <svg class="btn-icon" viewBox="0 0 24 24">
                                    <path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z"/>
                                </svg>
                            </button>
                        </div>
                    </form>
                    
                    <!-- Quick Actions -->
                    <div class="quick-actions">
                        <button class="quick-btn" data-url="https://www.google.com">Google</button>
                        <button class="quick-btn" data-url="https://www.youtube.com">YouTube</button>
                        <button class="quick-btn" data-url="https://github.com">GitHub</button>
                        <button class="quick-btn" data-url="https://twitter.com">Twitter</button>
                        <button class="quick-btn" data-url="https://www.reddit.com">Reddit</button>
                        <button class="quick-btn" data-url="https://wikipedia.org">Wikipedia</button>
                    </div>
                </div>
            </section>

            <!-- Settings Panel -->
            <section class="settings-panel" id="settingsPanel">
                <div class="settings-content">
                    <h3 class="settings-title">プロキシ設定</h3>
                    
                    <div class="settings-grid">
                        <!-- Ad Block Settings -->
                        <div class="setting-group">
                            <label class="setting-label">
                                <input type="checkbox" id="adblockToggle" checked>
                                <span class="checkmark"></span>
                                広告ブロック
                            </label>
                            <p class="setting-description">広告やトラッキングをブロックします</p>
                        </div>
                        
                        <!-- Security Settings -->
                        <div class="setting-group">
                            <label class="setting-label">
                                <input type="checkbox" id="securityToggle" checked>
                                <span class="checkmark"></span>
                                セキュリティ保護
                            </label>
                            <p class="setting-description">危険なサイトや悪意のあるコンテンツをブロックします</p>
                        </div>
                        
                        <!-- JavaScript Control -->
                        <div class="setting-group">
                            <label class="setting-label">JavaScript制御</label>
                            <select id="javascriptControl" class="setting-select">
                                <option value="enabled">有効 (推奨)</option>
                                <option value="restricted">制限付き</option>
                                <option value="disabled">無効</option>
                            </select>
                            <p class="setting-description">JavaScriptの実行を制御します</p>
                        </div>
                        
                        <!-- User Agent Settings -->
                        <div class="setting-group">
                            <label class="setting-label">ユーザーエージェント</label>
                            <select id="userAgentSelect" class="setting-select">
                                <option value="default">デフォルト</option>
                                <option value="chrome">Chrome (Windows)</option>
                                <option value="firefox">Firefox (Windows)</option>
                                <option value="safari">Safari (macOS)</option>
                                <option value="mobile_ios">Mobile Safari (iPhone)</option>
                                <option value="mobile_android">Chrome (Android)</option>
                                <option value="random">ランダム</option>
                            </select>
                            <p class="setting-description">ブラウザの識別情報を変更します</p>
                        </div>
                        
                        <!-- Theme Settings -->
                        <div class="setting-group">
                            <label class="setting-label">テーマ</label>
                            <select id="themeSelect" class="setting-select">
                                <option value="auto">自動</option>
                                <option value="light">ライト</option>
                                <option value="dark">ダーク</option>
                                <option value="blue">ブルー</option>
                            </select>
                            <p class="setting-description">表示テーマを選択します</p>
                        </div>
                        
                        <!-- Language Settings -->
                        <div class="setting-group">
                            <label class="setting-label">言語</label>
                            <select id="languageSelect" class="setting-select">
                                <option value="ja">日本語</option>
                                <option value="en">English</option>
                                <option value="zh">中文</option>
                                <option value="ko">한국어</option>
                            </select>
                            <p class="setting-description">インターフェース言語を選択します</p>
                        </div>
                    </div>
                    
                    <!-- Advanced Settings -->
                    <details class="advanced-settings">
                        <summary class="advanced-title">詳細設定</summary>
                        <div class="advanced-content">
                            <div class="setting-group">
                                <label class="setting-label">
                                    <input type="checkbox" id="cookiesToggle" checked>
                                    <span class="checkmark"></span>
                                    Cookie許可
                                </label>
                            </div>
                            
                            <div class="setting-group">
                                <label class="setting-label">
                                    <input type="checkbox" id="imagesToggle" checked>
                                    <span class="checkmark"></span>
                                    画像読み込み
                                </label>
                            </div>
                            
                            <div class="setting-group">
                                <label class="setting-label">
                                    <input type="checkbox" id="autoplayToggle">
                                    <span class="checkmark"></span>
                                    動画自動再生
                                </label>
                            </div>
                            
                            <div class="setting-group">
                                <label class="setting-label">カスタムCSS</label>
                                <textarea id="customCSS" class="setting-textarea" placeholder="/* カスタムCSSを入力 */"></textarea>
                            </div>
                        </div>
                    </details>
                </div>
            </section>

            <!-- Status Bar -->
            <section class="status-bar" id="statusBar">
                <div class="status-content">
                    <div class="status-item">
                        <span class="status-label">状態:</span>
                        <span class="status-value" id="connectionStatus">待機中</span>
                    </div>
                    
                    <div class="status-item">
                        <span class="status-label">ブロック済み:</span>
                        <span class="status-value" id="blockedCount">0</span>
                    </div>
                    
                    <div class="status-item">
                        <span class="status-label">速度:</span>
                        <span class="status-value" id="speedIndicator">-</span>
                    </div>
                    
                    <div class="status-item">
                        <span class="status-label">UA:</span>
                        <span class="status-value" id="currentUA">デフォルト</span>
                    </div>
                </div>
            </section>
        </main>

        <!-- Modals -->
        <!-- History Modal -->
        <div id="historyModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>閲覧履歴</h3>
                    <button class="modal-close" data-modal="historyModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="history-list" id="historyList">
                        <p class="empty-message">履歴はありません</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="clearHistoryBtn">履歴をクリア</button>
                </div>
            </div>
        </div>

        <!-- Bookmarks Modal -->
        <div id="bookmarksModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>お気に入り</h3>
                    <button class="modal-close" data-modal="bookmarksModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="bookmarks-list" id="bookmarksList">
                        <p class="empty-message">お気に入りはありません</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="clearBookmarksBtn">お気に入りをクリア</button>
                </div>
            </div>
        </div>

        <!-- Warning Modal -->
        <div id="warningModal" class="modal warning-modal">
            <div class="modal-content">
                <div class="modal-header warning-header">
                    <h3>⚠️ セキュリティ警告</h3>
                </div>
                <div class="modal-body">
                    <p id="warningMessage">このサイトは安全でない可能性があります。</p>
                    <p>続行しますか？</p>
                </div>
                <div class="modal-footer">
                    <button class="btn-danger" id="proceedBtn">続行</button>
                    <button class="btn-secondary" id="cancelBtn">キャンセル</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/uv/uv.bundle.js"></script>
    <script src="/uv/uv.config.js"></script>
    <script src="/assets/js/app.js"></script>
    <script src="/assets/js/settings.js"></script>
    <script src="/assets/js/history.js"></script>
    <script src="/assets/js/bookmarks.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js', {
                scope: '/service/'
            }).then(registration => {
                console.log('Service Worker registered successfully:', registration);
            }).catch(error => {
                console.error('Service Worker registration failed:', error);
            });
        }
    </script>
</body>
</html>